from bs4 import BeautifulSoupimport urllib2import sysimport jsonfrom pprint import pprint# From 42matters.comaccess_token_42m = 'xyz'def get_available_countries(package_name):    link_request = 'https://data.42matters.com/api/v2.0/android/apps/availability.json?'    link_request += 'p=' + package_name    link_request += '&access_token=' + access_token_42m    try:        response = urllib2.urlopen(link_request)        data = json.load(response)        # pprint (data)        return data['results'][0]['available_in']    except urllib2.HTTPError as e:        print ("Error while getting the availability in various countries ", e.reason)        return Nonedef get_app_url(package_name):    prefix = "https://play.google.com/store/apps/details?id="    prefix += package_name + "&hl=en"    return prefixdef is_free_app(package_name, soup):    if (soup == None):        return None    button_line = soup.find_all(class_="price buy id-track-click id-track-impression")[0]    button_meta_data = button_line.get_text().strip()    if (button_meta_data == 'Install'):        return True    return Falsedef is_freemium(package_name, soup):    if (soup == None):        return None    pay_line= soup.find_all(class_="inapp-msg")    if not pay_line:        return False    return Truedef has_ads(package_name, soup):    if (soup == None):        return None    pay_line = soup.find_all(class_="ads-supported-label-msg")    if not pay_line:        return False    return True'''    text = pay_line.get_text().strip()    if ('ads' in text):        return True    return False'''def connect(package_name):    try:        url = get_app_url(package_name)        html = urllib2.urlopen(url).read()        soup = BeautifulSoup(html, "html.parser")        return soup    except urllib2.URLError as e:        print ("Error in Connecting: ", e.reason)        if (e.reason == 'Not Found'):            print ("Please check the package name. If the package name is valid, then it can be a system app")            return None        elif (e.reason == 'Forbidden'):            countries = get_available_countries(package_name)            if (get_available_countries == None):                return None        return Noneif __name__ == '__main__':    if (len(sys.argv) != 2):        print ('Usage: Package name is needed as an argument')        sys.exit(1)    #print (get_available_countries('com.SecUpwN.AIMSICD'))    package_name = sys.argv[1]    soup = connect(package_name)    print ('Has Ads? %s' % has_ads(package_name, soup))    print ('Has In-app purchases? %s' % is_freemium(package_name, soup))    print ('Is Free? %s' % is_free_app(package_name, soup))# wait for some time before making repeated request# vim: set ts=8 sw=4 expandtab softtabstop=4